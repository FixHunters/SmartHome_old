CREATE TABLE CERTIFICATES (
	ID BIGSERIAL NOT NULL,
	FINGERPRINT VARCHAR(255) NOT NULL,
	ORG_ID VARCHAR(50) NOT NULL,
	TPP_NAME VARCHAR(255) NOT NULL,
	REGISTRATOR VARCHAR(255) NOT NULL,
	REGISTRATOR_COUNTRY VARCHAR(255) NOT NULL,
	ROLES VARCHAR(2000) NOT NULL,
	VALID_FROM TIMESTAMP NOT NULL,
	VALID_TO TIMESTAMP NOT NULL,
	CREATED TIMESTAMP NOT NULL,
	USED_LAST TIMESTAMP NOT NULL,
	UNIQUE (FINGERPRINT, ORG_ID),
	CONSTRAINT CERTIFICATES_pk PRIMARY KEY (ID)
);


CREATE TABLE LICENCES (
	ID BIGSERIAL NOT NULL,
	COUNTRY VARCHAR(10) NOT NULL,
	BLOCKED BOOLEAN NOT NULL DEFAULT FALSE,
	LICENCE_ID VARCHAR(50) NOT NULL,
	REASON VARCHAR(255),
	LAST_CHANGE TIMESTAMP NOT NULL,
	CONSTRAINT LICENCES_pk PRIMARY KEY (ID)
);


CREATE TABLE CERTIFICATES_LICENCES (
	FK_CERTIFICATES_ID BIGINT NOT NULL,
	FK_LICENCES_ID BIGINT NOT NULL
);


ALTER TABLE CERTIFICATES_LICENCES ADD CONSTRAINT CERTIFICATES_LICENCES_fk0 FOREIGN KEY (FK_CERTIFICATES_ID) REFERENCES CERTIFICATES(ID);
ALTER TABLE CERTIFICATES_LICENCES ADD CONSTRAINT CERTIFICATES_LICENCES_fk1 FOREIGN KEY (FK_LICENCES_ID) REFERENCES LICENCES(ID);